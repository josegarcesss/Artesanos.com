html
    head
        title Artesanos.com - Upload
        meta(charset="UTF-8")
        meta(name="viewport" content="width=device-width, initial-scale=1.0")
        link(rel="stylesheet" href="/css/style.css")
    body
        include navbar

        block content
            h2 Subir Nueva Imagen

            if albums.length == 0
                p No tienes √°lbumes. Crea uno a continuaci√≥n.
            else
                h3 √Ålbumes existentes:
                each album in albums
                    .album-item(style="margin-bottom: 10px;")
                        input(type="radio" name="album" value=album.id_album required)
                        |  #{album.titulo}
                        form(action="/album/delete" method="POST" style="display:inline;")
                            input(type="hidden" name="albumId" value=album.id_album)
                            button(type="submit" onclick="return confirm('¬øEst√°s seguro de borrar este √°lbum?')") üóëÔ∏è

            form(method="POST" action="/upload" enctype="multipart/form-data")
                .form-group
                    label Selecciona o crea un √°lbum:
                    select(name="album" required)
                        option(value="" disabled selected) -- Selecciona un √°lbum --
                        each album in albums
                            option(value=album.id_album) #{album.titulo}
                        option(value="new") ‚ûï Crear nuevo √°lbum

                .form-group
                    input(type="text" name="newAlbumTitle" placeholder="T√≠tulo del nuevo √°lbum" id="newAlbumInput" style="display:none;" oninput="this.setCustomValidity('')")
                    small Solo si seleccionaste "Crear nuevo √°lbum"

                .form-group
                    label T√≠tulo de la imagen:
                    input(type="text" name="title" placeholder="Opcional")

                .form-group
                    label Descripci√≥n:
                    textarea(name="description")

                .form-group
                    label Imagen:
                    input(type="file" name="imagen" accept="image/*" required)

                button(type="submit") Subir Imagen

            script.
                document.querySelector("select[name='album']").addEventListener("change", function() {
                    var newAlbumInput = document.getElementById("newAlbumInput");
                    if (this.value === "new") {
                        newAlbumInput.style.display = 'block';
                        newAlbumInput.setAttribute("required", "required");
                    } else {
                        newAlbumInput.style.display = 'none';
                        newAlbumInput.removeAttribute("required");
                        newAlbumInput.value = '';
                    }
                });
